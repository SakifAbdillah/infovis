<html>
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
	*{margin: 0px; padding: 0px}
	#map-canvas{width: 100%; height: 100%; display: block;}
	</style>
</head>
<body>
	<div id="map-canvas"></div>
	<script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyANln09l2wflbNzL5kXlOkb4cuURGYMlvs"></script>
	<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
	<script type="text/javascript">
		
		window.onload = function(){
			var MY_MAPTYPE_ID = 'styled';

			var featureOpts = [
				{
					"featureType": "administrative",
					"stylers": [
					{ "visibility": "off" }
					]
				},{
					"featureType": "landscape.natural",
					"stylers": [
					{ "visibility": "off" }
					]
				},{
					"featureType": "road",
					"elementType": "geometry",
					"stylers": [
					{ "color": "#c2c5c2" }
					]
				},{
					"featureType": "poi",
					"stylers": [
					{ "visibility": "off" }
					]
				},{
					"featureType": "transit",
					"stylers": [
					{ "visibility": "off" }
					]
				},{
					"featureType": "road",
					"elementType": "labels",
					"stylers": [
					{ "visibility": "off" }
					]
				},{
					"featureType": "water",
					"elementType": "labels",
					"stylers": [
					{ "visibility": "off" }
					]
				},{
					"featureType": "water",
					"stylers": [
					{ "color": "#a7a7a7" }
					]
				}
			];
			var mapOptions = {
				zoom: 12,
				center: new google.maps.LatLng(52.376078, 4.894151),
				mapTypeId: MY_MAPTYPE_ID
			};
			var styledMapOptions = {
				name: 'Custom Style'
			};

			var customMapType = new google.maps.StyledMapType(featureOpts, styledMapOptions);
			
			var map = new google.maps.Map(document.getElementById('map-canvas'),mapOptions);

			map.mapTypes.set(MY_MAPTYPE_ID, customMapType);

			map.data.loadGeoJson('amsterdamRegion.geojson');
			map.data.setStyle({
				strokeWeight : 1,
				fillOpacity: 0.2
			});
			map.data.addListener("mouseover", function(event){
				console.log(event.feature.k.bcnaam);
			});
			var areasArray = [];
			$(function(){
			$.getJSON('areadata.json',function(data) {
                console.log('success');
                $.each(data.areas, function (i, area) {
                    areasArray[areasArray.length] = [area.areaCode, area.security];
                });
                        map.data.setStyle(function(feature) {
    				        var thisAreaCode = feature.getProperty('sdbc');
					        var security;
					        for(var i = 0; i<areasArray.length; i++){

						        if(areasArray[i][0] == thisAreaCode){
							        security = parseInt(areasArray[i][1]);
                                    console.log(i + " " + security);
                                    break;
                                }
					        }
					        var color;
					        switch(security){
						        case 1: color = "white"; break;
						        case 2: color = "green"; break;
						        case 3: color = "yellow"; break;
						        case 4: color = "red"; break;
						        case 5: color = "black"; break;
					        }
                        alert(color);
    					return {
      						fillColor: color
    				};
});
        		}).error(function(){
            			console.log('error');
        		});
			
    			});
		}
	</script>
</body>
</html>